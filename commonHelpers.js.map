{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import '../css/timer.css';\nimport '../css/styles.css';\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst inputDate = document.querySelector(`#datetime-picker`);\nconst buttonStart = document.querySelector(`.btn-start`);\nconst daysValue = document.querySelector(`span[data-days]`);\nconst hoursValue = document.querySelector(`span[data-hours]`);\nconst minutesValue = document.querySelector(`span[data-minutes]`);\nconst secondsValue = document.querySelector(`span[data-seconds]`);\n\nbuttonStart.setAttribute('disabled', 'disabled');\n\nlet timerId = null;\nlet chosenDate = null;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose,\n};\n\nflatpickr(inputDate, options);\n\nfunction onClose(selectedDates) {\n  chosenDate = selectedDates[0];\n\n  if (chosenDate < Date.now()) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please choose a date in the future',\n    });\n  } else {\n    buttonStart.removeAttribute('disabled');\n  }\n}\n\nbuttonStart.addEventListener(`click`, onClick);\n\nfunction onClick() {\n  timerId = setInterval(() => {\n    buttonStart.setAttribute('disabled', 'disabled');\n    inputDate.setAttribute('disabled', 'disabled');\n\n    const currentTime = Date.now();\n    const differenceTime = chosenDate - currentTime;\n    console.log(differenceTime, chosenDate, currentTime);\n\n    if (differenceTime < 1000) {\n      clearInterval(timerId);\n      inputDate.removeAttribute('disabled');\n    }\n\n    const { days, hours, minutes, seconds } = convertMs(differenceTime);\n    formatTimer({ days, hours, minutes, seconds });\n  }, 1000);\n}\n\nfunction formatTimer({ days, hours, minutes, seconds }) {\n  daysValue.textContent = days;\n  hoursValue.textContent = hours;\n  minutesValue.textContent = minutes;\n  secondsValue.textContent = seconds;\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = pad(Math.floor(ms / day));\n  // Remaining hours\n  const hours = pad(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = pad(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = pad(Math.floor((((ms % day) % hour) % minute) / second));\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction pad(value) {\n  return String(value).padStart(2, '0');\n}\n"],"names":["inputDate","buttonStart","daysValue","hoursValue","minutesValue","secondsValue","timerId","chosenDate","options","onClose","flatpickr","selectedDates","iziToast","onClick","currentTime","differenceTime","days","hours","minutes","seconds","convertMs","formatTimer","ms","pad","value"],"mappings":"kLAOA,MAAMA,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAY,SAAS,cAAc,iBAAiB,EACpDC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAe,SAAS,cAAc,oBAAoB,EAEhEJ,EAAY,aAAa,WAAY,UAAU,EAE/C,IAAIK,EAAU,KACVC,EAAa,KAEjB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAAC,CACF,EAEAC,EAAUV,EAAWQ,CAAO,EAE5B,SAASC,EAAQE,EAAe,CAC9BJ,EAAaI,EAAc,CAAC,EAExBJ,EAAa,KAAK,MACpBK,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oCACf,CAAK,EAEDX,EAAY,gBAAgB,UAAU,CAE1C,CAEAA,EAAY,iBAAiB,QAASY,CAAO,EAE7C,SAASA,GAAU,CACjBP,EAAU,YAAY,IAAM,CAC1BL,EAAY,aAAa,WAAY,UAAU,EAC/CD,EAAU,aAAa,WAAY,UAAU,EAE7C,MAAMc,EAAc,KAAK,MACnBC,EAAiBR,EAAaO,EACpC,QAAQ,IAAIC,EAAgBR,EAAYO,CAAW,EAE/CC,EAAiB,MACnB,cAAcT,CAAO,EACrBN,EAAU,gBAAgB,UAAU,GAGtC,KAAM,CAAE,KAAAgB,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAc,EAClEM,EAAY,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAAA,CAC9C,EAAE,GAAI,CACT,CAEA,SAASE,EAAY,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACtDjB,EAAU,YAAcc,EACxBb,EAAW,YAAcc,EACzBb,EAAa,YAAcc,EAC3Bb,EAAa,YAAcc,CAC7B,CAEA,SAASC,EAAUE,EAAI,CAQrB,MAAMN,EAAOO,EAAI,KAAK,MAAMD,EAAK,KAAG,CAAC,EAE/BL,EAAQM,EAAI,KAAK,MAAOD,EAAK,MAAO,IAAI,CAAC,EAEzCJ,EAAUK,EAAI,KAAK,MAAQD,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEtDH,EAAUI,EAAI,KAAK,MAASD,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAEvE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASI,EAAIC,EAAO,CAClB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}