{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import '../css/timer.css';\nimport '../css/styles.css';\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst inputDate = document.querySelector(`#datetime-picker`);\nconst buttonStart = document.querySelector(`.btn-start`);\nconst daysValue = document.querySelector(`span[data-days]`);\nconst hoursValue = document.querySelector(`span[data-hours]`);\nconst minutesValue = document.querySelector(`span[data-minutes]`);\nconst secondsValue = document.querySelector(`span[data-seconds]`);\n\n// Початково вимикаємо кнопку \"Старт\"\nbuttonStart.dataset.start = 'disabled';\n\nlet timerId = null;\nlet chosenDate = null;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose,\n};\n\nflatpickr(inputDate, options);\nfunction onClose(selectedDates) {\n  chosenDate = selectedDates[0];\n\n  if (!chosenDate || chosenDate < Date.now()) {\n    // Вимикаємо кнопку \"Старт\", якщо дата не обрана або обрана в минулому\n    buttonStart.dataset.start = 'disabled';\n    iziToast.error({\n      title: 'Error',\n      message: 'Please choose a date in the future',\n    });\n  } else {\n    // Увімкнення кнопки \"Старт\", якщо обрана дата в майбутньому\n    buttonStart.dataset.start = 'enabled';\n  }\n}\n\nbuttonStart.addEventListener(`click`, onClick);\n\nfunction onClick() {\n  // Перевіряємо, чи обрана дата, перед тим як запускати таймер\n  if (!chosenDate) {\n    return;\n  }\n\n  // Перевіряємо атрибут data-start, щоб визначити, чи має бути увімкнено кнопку \"Старт\"\n  if (buttonStart.dataset.start === 'disabled') {\n    return;\n  }\n\n  // Вимикаємо кнопку \"Старт\" і вимикаємо поле вводу після натискання кнопки \"Старт\"\n  buttonStart.dataset.start = 'disabled';\n  inputDate.disabled = true;\n\n  timerId = setInterval(() => {\n    const currentTime = Date.now();\n    const differenceTime = chosenDate - currentTime;\n\n    if (differenceTime <= 0) {\n      clearInterval(timerId);\n      inputDate.disabled = false;\n      iziToast.success('Timer expired');\n      return;\n    }\n\n    const { days, hours, minutes, seconds } = convertMs(differenceTime);\n    formatTimer({ days, hours, minutes, seconds });\n  }, 1000);\n}\n\nfunction formatTimer({ days, hours, minutes, seconds }) {\n  daysValue.textContent = pad(days);\n  hoursValue.textContent = pad(hours);\n  minutesValue.textContent = pad(minutes);\n  secondsValue.textContent = pad(seconds);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = pad(Math.floor(ms / day));\n  // Remaining hours\n  const hours = pad(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = pad(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = pad(Math.floor((((ms % day) % hour) % minute) / second));\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction pad(value) {\n  return String(value).padStart(2, '0');\n}\n"],"names":["inputDate","buttonStart","daysValue","hoursValue","minutesValue","secondsValue","timerId","chosenDate","options","onClose","flatpickr","selectedDates","iziToast","onClick","currentTime","differenceTime","days","hours","minutes","seconds","convertMs","formatTimer","pad","ms","value"],"mappings":"kLAOA,MAAMA,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAY,SAAS,cAAc,iBAAiB,EACpDC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAe,SAAS,cAAc,oBAAoB,EAGhEJ,EAAY,QAAQ,MAAQ,WAE5B,IAAIK,EAAU,KACVC,EAAa,KAEjB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAAC,CACF,EAEAC,EAAUV,EAAWQ,CAAO,EAC5B,SAASC,EAAQE,EAAe,CAC9BJ,EAAaI,EAAc,CAAC,EAExB,CAACJ,GAAcA,EAAa,KAAK,IAAG,GAEtCN,EAAY,QAAQ,MAAQ,WAC5BW,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oCACf,CAAK,GAGDX,EAAY,QAAQ,MAAQ,SAEhC,CAEAA,EAAY,iBAAiB,QAASY,CAAO,EAE7C,SAASA,GAAU,CAEZN,GAKDN,EAAY,QAAQ,QAAU,aAKlCA,EAAY,QAAQ,MAAQ,WAC5BD,EAAU,SAAW,GAErBM,EAAU,YAAY,IAAM,CAC1B,MAAMQ,EAAc,KAAK,MACnBC,EAAiBR,EAAaO,EAEpC,GAAIC,GAAkB,EAAG,CACvB,cAAcT,CAAO,EACrBN,EAAU,SAAW,GACrBY,EAAS,QAAQ,eAAe,EAChC,MACD,CAED,KAAM,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAc,EAClEM,EAAY,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAAA,CAC9C,EAAE,GAAI,EACT,CAEA,SAASE,EAAY,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACtDjB,EAAU,YAAcoB,EAAIN,CAAI,EAChCb,EAAW,YAAcmB,EAAIL,CAAK,EAClCb,EAAa,YAAckB,EAAIJ,CAAO,EACtCb,EAAa,YAAciB,EAAIH,CAAO,CACxC,CAEA,SAASC,EAAUG,EAAI,CAQrB,MAAMP,EAAOM,EAAI,KAAK,MAAMC,EAAK,KAAG,CAAC,EAE/BN,EAAQK,EAAI,KAAK,MAAOC,EAAK,MAAO,IAAI,CAAC,EAEzCL,EAAUI,EAAI,KAAK,MAAQC,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEtDJ,EAAUG,EAAI,KAAK,MAASC,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAEvE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASG,EAAIE,EAAO,CAClB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}